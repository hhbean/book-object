# 객체, 설계

## 소프트웨어
**이론? 실무?** : 이론보다 실무가 먼저다
 - 소프트웨어는 실무에서 반복적으로 적용되던 기법들이 이론화 된 것

**모듈의 세가지 목적**
 1) 제대로 동작
 2) 변경 용이성
 3) 의사소통(이해)

## 티켓판매 애플리케이션 예제
극장이 관람객의 가방과 판매원의 매표소에 직접 접근하여 일을 처리한다.  
제대로 동작 O / 변경 용이성 X / 이해 X

**문제점**
 1) 상식과 다르게 동작하므로 예상을 벗어남 -> 이해 어려움
 2) Theater가 너무 많은 클래스에 의존적 -> 변경 취약 (*Dependency*)
 
**의존성 (Dependency)**
 - 의존성은 변경에 대한 영향
 - 단, 의존성을 완전히 없애는 것이 정답은 아님
 - 객체지향 설계는 서로 의존하면서 협력하는 객체들의 공동체를 구축하는 것
 - 최소한의 의존성만 유지하자

**결합도 (Coupling)**
 - 객체사이의 의존성이 높으면 결합도도 높다
 - 객체 사이의 결합도를 낮춰 변경이 용이한 설계를 만드는 것

## 설계 개선
Audience, TicketSeller를 Theater로 부터 *자율적인* 존재로 만들기  

**캡슐화 (Encapsulation)**
 - 객체 내부의 세부적인 사항을 감춤
 - TicketOffice에 대한 접근은 TicketSeller만 할 수 있음 (의존성제거)  
 객체 내부로의 접근을 제한한다.
 - 객체가 자신의 문제를 스스로 해결하도록 한다. (자율성)
 - 캡슐화는 객체사이의 결합도를 낮춘다.

**응집도 (Cohesion)**
 - 밀접하게 연관된 작업만 수행하고 연관성 없는 작업은 다른 객체에 위임 (응집도가 높음)
 - 객체 스스로 자신의 데이터를 책임져야 한다.

**객체지향 프로그래밍(Object-Oriented Programing)**
 - 절차지향 ?  
 객체들은 수동적인 존재, 데이터 변경은 여러 클래스에 영향을 미침  
 절차적 프로그래밍의 세상은 변경하기 어려운 코드를 양상한다.
 - 변경하기 쉬운 설계는 한 번에 하나의 클래스만 변경할 수 있는 설계
 - 데이터와 프로세스가 동일한 모듈 내부에 위치하도록 프로그래밍하는 방식이 OOP
 - 객체지향 설계의 핵심 ?  
 캡슐화를 통해 의존성을 적절히 관리하도록 설계되어 자신의 문제를 스스로 처리하는 객체는  
 이해하기 쉽고 변경이 수월하다.

**책임(기능)의 이동**
 - Theater에 집중돼 있는 책임을 개별 객체로 이동한다.
 - 스스로 책임을 수행하는 자율적인 객체들의 공동체 구성

```
코드에서 데이터와 데이터를 사용하는 프로세스가 별도의 객체에 위치하고 있다면, 절자척 프로그래밍 방식을 따르고 있을 확률이 높다!  
데이터와 데이터를 사용하는 프로세스가 동일한 객체 안에 위치 한다면, 객체지향 프로그래밍 방식을 따르고 있을 확률이 높다!
```
 - 객체는 다른 객체와의 협력이라는 문맥 안에서 특정한 역할을 수행하는 데 필요한 적절한 책임을 수행해야 한다.
 - 객체가 가지는 데이터 보다, 객체에 어떤 책임을 할당할 것인지에 초점을 맞추자
 
**트레이드오프**
그림 1.9
 - 결합도를 낮추는 것과 객체 자율성을 높히는 것 중 무엇을 선택할 것인가?
 - 설계는 트레이트오프의 산물  
 어떤 설계도 모든 사람들을 만족시킬 수는 없다 !!!

**의인화 (Anthropomorphism)**
 - 현실에서 수동적인 존재(무생물)도, 객체지향 세계에서는 모든 것이 능동적이고 자율적인 존재로 변한다.
 - 훌륭한 객체지향 설계란, 소프트웨어를 구성하는 모든 객체들이 자율적으로 행동하는 설계

## 객체지향 설계
**설계란?**
 - 코드를 배치하는것
 - 설계를 구현과 떨어트려서 이야기하는 것은 불가능
 - 설계는 코드 작성의 일부이며, 코드를 작성하지 않고서는 검증할 수 없다.
 - 좋은 설계란 오늘 요구하는 기능을 온전히 수행하며 내일의 변경을 매끄럽게 수용하는 설계
 - 변경을 수용할 수 있는 설계는 코드 변경시 버그가 추가되지 않는 설계다.  
 요구사항 변경으로 버그를 추가할 지도 모른다는 생각이 코드 수정을 회피하게 만든다.

**객체지향 설계**
 - 변경에 유연하게 대응할 수 있는 코드
 - 객체지향은 우리가 예상하는 방식대로 객체가 행동하리라는 것을 보장함으로써 코드를 좀 더 쉽게 이해할 수 있게 한다.
 - 데이터와 프로세스를 하나의 덩어리로 모으며(클래스), 객체간의 적한 의존성을 갖게 하여  
 변경에 용이한 설계를 만든다.

> 훌륭한 객체지향 설계란 협력하는 객체 사이의 의존성을 적절하게 관리하는 설계
